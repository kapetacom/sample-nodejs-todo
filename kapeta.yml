kind: core/plan
metadata:
  name: kapeta/sample-nodejs-plan
spec:
  blocks:
    - block:
        ref: kapeta/nodejs-sample-todo-service:local
      name: Todo Service
      dimensions:
        height: -1
        top: 182
        left: 439
        width: 150
      id: 3f07dd67-c117-6789-0a8d-3ddeaa86c79f
    - block:
        ref: kapeta/nodejs-sample-users-service:local
      name: User Service
      dimensions:
        height: -1
        top: 449
        left: 149
        width: 150
      id: 929f6297-cd04-904b-6bff-04a72eb2a88f
    - block:
        ref: kapeta://kapeta/nodejs-sample-todo-ui:local
      name: Todo UI
      dimensions:
        height: -1
        top: 107.78125
        left: 860
        width: 150
      id: da76710b-ccaa-fe32-cc9f-be5f559ed203
    - block:
        ref: kapeta://kapeta/nodejs-sample-user-ui:local
      name: User UI
      dimensions:
        height: -1
        top: 520.78125
        left: 690
        width: 150
      id: 6c895976-87f0-495e-4e5c-953bdc81a442
    - block:
        ref: kapeta://kapeta/sample-nodejs-ui-gateway:local
      name: Todo App
      dimensions:
        height: -1
        top: 361.78125
        left: 1215
        width: 150
      id: a377f555-8638-37cf-9e0e-34bcd8c1a84a
  connections:
    - from:
        blockId: 6c895976-87f0-495e-4e5c-953bdc81a442
        resourceName: Users
      to:
        blockId: a377f555-8638-37cf-9e0e-34bcd8c1a84a
        resourceName: Users
        port:
          type: rest
    - from:
        blockId: 929f6297-cd04-904b-6bff-04a72eb2a88f
        resourceName: users
      to:
        blockId: 6c895976-87f0-495e-4e5c-953bdc81a442
        resourceName: users
        port:
          type: rest        
      mapping:
        registerUser:
          targetId: registerUser
          type: EXACT
        activateUser:
          targetId: activateUser
          type: EXACT
        authenticationUser:
          targetId: authenticationUser
          type: EXACT
        resetPassword:
          targetId: resetPassword
          type: EXACT
        getUser:
          targetId: getUser
          type: EXACT
        deleteUser:
          targetId: deleteUser
          type: EXACT
    - from:
        blockId: 929f6297-cd04-904b-6bff-04a72eb2a88f
        resourceName: users
      to:
        blockId: 3f07dd67-c117-6789-0a8d-3ddeaa86c79f
        resourceName: users
        port:
          type: rest        
      mapping:
        getUser:
          targetId: getUserById
          type: EXACT
    - from:
        blockId: 3f07dd67-c117-6789-0a8d-3ddeaa86c79f
        resourceName: tasks
      to:
        blockId: da76710b-ccaa-fe32-cc9f-be5f559ed203
        resourceName: tasks
        port:
          type: rest        
      mapping:
        addTask:
          targetId: addTask
          type: EXACT
        markAsDone:
          targetId: markAsDone
          type: EXACT
        removeTask:
          targetId: removeTask
          type: EXACT
    - from:
        blockId: da76710b-ccaa-fe32-cc9f-be5f559ed203
        resourceName: todo
      to:
        blockId: a377f555-8638-37cf-9e0e-34bcd8c1a84a
        resourceName: todo
        port:
          type: rest
kind: blockware/block-type-service
metadata:
  name: Todo
  version: 1.0.0
spec:
  target:
    kind: blockware/language-target-nodejs

  entities:
    types:
    - name: Task
      properties:
        id:
          type: string
        userId:
          type: string
        title:
          type: string
        description:
          type: string
        done:
          type: boolean

    - name: User
      properties:
        id:
          type: string
        name:
          type: string
        email:
          type: string

  consumers:
  - kind: blockware/resource-type-mongodb
    metadata:
      name: todo
  - kind: blockware/resource-type-rest-client
    metadata:
      name: users
    spec:
      methods:
        getUserById:
          description: Get users by id
          method: GET
          path: /users/{id}

          arguments:
            id:
              type: string
              transport: path

          responseType: User

  providers:
  - kind: blockware/resource-type-rest-api
    metadata:
      name: tasks
    spec:
      methods:
        addTask:
          description: Add task for user
          method: POST
          path: /tasks/{userId}/{id}

          arguments:
            userId:
              type: string
              transport: path
            id:
              type: string
              transport: path
            task:
              type: Task
              transport: body

      markAsDone:
        description: Mark task as done
        method: POST
        path: /tasks/{id}/done

        arguments:
          id:
            type: string
            transport: path

      removeTask:
        description: Delete task
        method: DELETE
        path: /tasks/{id}

        arguments:
          id:
            type: string
            transport: path